pluginManagement {
  // --- Flutter SDK のパスを local.properties から取得 ---
  def localProperties = new Properties()
  def localPropertiesFile = new File(settingsDir, "local.properties")
  assert localPropertiesFile.exists()
  localPropertiesFile.withReader("UTF-8") { reader -> localProperties.load(reader) }

  def flutterSdkPath = localProperties.getProperty("flutter.sdk")
  assert flutterSdkPath != null : "flutter.sdk not set in local.properties"

  // --- これが超重要：Flutter のプラグインを SDK 同梱のビルドから解決する ---
  includeBuild("$flutterSdkPath/packages/flutter_tools/gradle")

  repositories {
    google()
    mavenCentral()
    gradlePluginPortal()
  }
}

plugins {
  // Flutter のプラグインローダ
  id "dev.flutter.flutter-plugin-loader" version "1.0.0"

  // ここに使うプラグインのバージョンを宣言
  id "com.android.application" version "8.5.2" apply false
  id "org.jetbrains.kotlin.android" version "1.9.24" apply false
  id "com.google.gms.google-services" version "4.4.2" apply false
  id "com.google.firebase.crashlytics" version "2.9.9" apply false
}

include(":app")
